<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>St Andrews Camp Cost Calculator</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{
      font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
      min-height:100vh;padding:20px;color:#222;
    }
    .calculator-container{
      max-width:900px;margin:0 auto;background:rgba(255,255,255,.97);
      border-radius:18px;box-shadow:0 20px 40px rgba(0,0,0,.12);overflow:hidden
    }
    .header{background:linear-gradient(135deg,#4ECDC4,#44A08D);color:#fff;padding:28px;text-align:center}
    .header h1{font-size:2.2em;margin-bottom:6px;text-shadow:0 2px 4px rgba(0,0,0,.18)}
    .header p{font-size:1.05em;opacity:.95}
    .calculator-body{padding:28px}
    .input-section{
      display:grid;grid-template-columns:repeat(auto-fit,minmax(230px,1fr));
      gap:20px;margin-bottom:22px
    }
    .input-group{background:#f8f9fa;padding:18px;border-radius:12px;border-left:6px solid #4ECDC4}
    .input-group label{display:block;font-weight:700;margin-bottom:8px;color:#333}
    .input-group input{width:100%;padding:12px;border-radius:8px;border:1px solid #e0e6ed;font-size:1rem}
    .calculate-btn{
      width:100%;padding:16px;background:linear-gradient(135deg,#FF6B6B,#FF8E53);
      color:#fff;border:none;border-radius:12px;font-size:1.05em;font-weight:700;cursor:pointer;margin-bottom:18px
    }
    .results-section{
      background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:20px;border-radius:12px;
      opacity:0;transform:translateY(12px);transition:all .45s ease
    }
    .results-section.show{opacity:1;transform:translateY(0)}
    .cost-breakdown{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:14px;margin-bottom:16px}
    .cost-item{background:rgba(255,255,255,.08);padding:12px;border-radius:8px;text-align:center;backdrop-filter:blur(3px)}
    .cost-item h3{font-size:.9em;opacity:.9;margin-bottom:6px;text-transform:uppercase}
    .cost-item .amount{font-size:1.2em;font-weight:800}
    .detailed{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .detail-box{flex:1 1 200px;background:rgba(255,255,255,.06);padding:12px;border-radius:8px}
    .detail-box b{display:block;margin-bottom:6px;font-size:.95rem}

    /* NEW Financial Status styling */
    .financial {
      display:grid;
      grid-template-columns: 1fr 320px;
      gap:18px;
      align-items:start;
    }
    .financial-left {
      background: rgba(255,255,255,0.06);
      padding: 16px;
      border-radius: 10px;
    }
    .status-big {
      display:flex;
      align-items:center;
      gap:14px;
      padding: 12px;
      border-radius: 10px;
      margin-bottom: 14px;
    }
    .status-amount { font-size: 1.6rem; font-weight: 900; }
    .status-label { font-weight:700; opacity:0.95; }

    .surplus-box { background: rgba(78,205,196,0.12); color:#0b6b56; border-left:6px solid #4ECDC4; }
    .deficit-box { background: rgba(255,107,107,0.12); color:#7b1e1e; border-left:6px solid #FF6B6B; }
    .balanced-box { background: rgba(150,206,180,0.12); color:#23533a; border-left:6px solid #96CEB4; }

    .breakdown-list { list-style:none; margin-top:6px; }
    .breakdown-list li { display:flex; justify-content:space-between; padding:8px 0; border-bottom:1px dashed rgba(255,255,255,0.05); font-weight:600; }
    .breakdown-list li small { display:block; font-weight:400; opacity:0.9; font-size:0.9rem; }

    .financial-right {
      padding:14px;
      border-radius:10px;
      text-align:center;
      background: rgba(255,255,255,0.06);
    }
    .net-student { font-size:2rem; font-weight:900; margin-bottom:6px; }
    .net-label { font-weight:700; opacity:0.95; margin-bottom:10px; display:block; }

    .recommendation { margin-top:12px; padding:12px; border-radius:8px; background:rgba(255,255,255,0.12); font-weight:700; }

    @media(max-width:860px){
      .financial { grid-template-columns: 1fr; }
    }

    .amount-highlight{font-size:2em;font-weight:800;margin:10px 0}
    .surplus{color:#4ECDC4}.deficit{color:#FF6B6B}.balanced{color:#96CEB4}

    @media(max-width:740px){.calculator-body{padding:18px}.header h1{font-size:1.6em}}
  </style>
</head>
<body>
  <div class="calculator-container">
    <div class="header">
      <h1>üèïÔ∏è Camp Cost Calculator</h1>
      <p>St Andrews Crossroads Camp ‚Äî November 24‚Äì29, 2025 ¬∑ Malewa Bush Ventures</p>
    </div>

    <div class="calculator-body">
      <div class="input-section">
        <div class="input-group">
          <label for="students">üë• Number of Students</label>
          <input type="number" id="students" min="1" max="300" value="25"/>
        </div>
        <div class="input-group">
          <label for="churchContribution">‚õ™ Church Contribution (KES)</label>
          <input type="number" id="churchContribution" min="0" value="300000"/>
        </div>
        <div class="input-group">
          <label for="feePerStudent">üí∞ Fee per Student (KES)</label>
          <input type="number" id="feePerStudent" min="0" value="17000"/>
        </div>
      </div>

      <button class="calculate-btn" onclick="calculateCampCost()">üßÆ Calculate Camp Finances</button>

      <div id="results" class="results-section" aria-live="polite">
        <div class="cost-breakdown" aria-hidden="true">
          <div class="cost-item">
            <h3>Fixed Costs</h3>
            <div class="amount" id="fixedCosts">KES 0</div>
          </div>
          <div class="cost-item">
            <h3>Variable Costs</h3>
            <div class="amount" id="variableCosts">KES 0</div>
          </div>
          <div class="cost-item">
            <h3>Additional Expenses</h3>
            <div class="amount" id="additionalCosts">KES 111,000</div>
          </div>
          <div class="cost-item" style="display:none;">
            <h3>Total Camp Cost (hidden duplicate)</h3>
            <div class="amount" id="totalCostHidden">KES 0</div>
          </div>
        </div>

        <!-- NEW Financial Status area -->
        <div class="financial" role="region" aria-label="Financial status">
          <div class="financial-left" id="financialLeft">
            <!-- status box (surplus/deficit) injected here -->
            <div id="statusBox" class="status-big balanced-box">
              <div>
                <div class="status-label">Status</div>
                <div id="statusText">‚Äî</div>
              </div>
              <div style="margin-left:auto; text-align:right;">
                <div style="font-size:0.9rem; opacity:0.9">Balance</div>
                <div class="status-amount" id="statusAmount">KES 0</div>
              </div>
            </div>

            <ul class="breakdown-list" aria-live="polite">
              <li><span>Total Revenue</span><span id="revAmount">KES 0</span></li>
              <li><span>Total Camp Cost</span><span id="costAmount">KES 0</span></li>
              <li><span>Net to be covered by fees</span><span id="netToCover">KES 0</span></li>
              <li><span>Computed balance</span><span id="computedBalance">KES 0</span></li>
            </ul>

            <div id="recommendationBox" class="recommendation" aria-live="polite">
              <!-- recommendation text injected here -->
            </div>
          </div>

          <div class="financial-right" id="financialRight">
            <div class="net-label">Net per Student (what parents pay)</div>
            <div class="net-student" id="netPerStudent">KES 0</div>
            <div style="font-size:0.95rem;opacity:0.95;margin-top:6px;" id="withinTargetText">‚Äî</div>
          </div>
        </div>
      </div>

    </div>
  </div>

<script>
  // Values synced to the PDF / executive summary
  const TOTAL_FIXED = 173400;      // KES
  const VARIABLE_PER_STUDENT = 17600; // KES
  const ADDITIONAL_EXPENSES = 111000; // KES
  const TARGET_LOW = 15000;
  const TARGET_HIGH = 17000;

  function money(x){
    return 'KES ' + Number(Math.round(x)).toLocaleString();
  }

  function calculateCampCost(){
    const students = Math.max(1, parseInt(document.getElementById('students').value, 10) || 0);
    const churchContribution = Math.max(0, parseInt(document.getElementById('churchContribution').value, 10) || 0);
    const feePerStudent = Math.max(0, parseInt(document.getElementById('feePerStudent').value, 10) || 0);

    // Core cost math (no VAT)
    const totalFixedCosts = TOTAL_FIXED;
    const totalVariableCosts = students * VARIABLE_PER_STUDENT;
    const quoteSubtotal = totalFixedCosts + totalVariableCosts;
    const totalCampCost = quoteSubtotal + ADDITIONAL_EXPENSES;

    // Net that fees must cover after church contribution
    const netToBeCovered = totalCampCost - churchContribution;
    const netPerStudent = netToBeCovered > 0 ? Math.ceil(netToBeCovered / students) : 0;

    // Revenue & balance
    const totalRevenue = (students * feePerStudent) + churchContribution;
    const balance = totalRevenue - totalCampCost;
    const absBalance = Math.abs(balance);

    // Update small cost tiles (kept for transparency)
    document.getElementById('fixedCosts').textContent = money(totalFixedCosts);
    document.getElementById('variableCosts').textContent = money(totalVariableCosts);
    document.getElementById('additionalCosts').textContent = money(ADDITIONAL_EXPENSES);
    document.getElementById('totalCostHidden').textContent = money(totalCampCost);

    // Update financial breakdown
    document.getElementById('revAmount').textContent = money(totalRevenue);
    document.getElementById('costAmount').textContent = money(totalCampCost);
    document.getElementById('netToCover').textContent = money(Math.max(0, netToBeCovered));
    document.getElementById('computedBalance').textContent = money(balance);

    // Net per-student prominent display
    document.getElementById('netPerStudent').textContent = money(netPerStudent);

    // Within target text
    const within = netPerStudent === 0 ? 'Fully covered by church contribution' :
                   (netPerStudent >= TARGET_LOW && netPerStudent <= TARGET_HIGH) ? 'Within target range' :
                   netPerStudent > TARGET_HIGH ? 'Above target range' :
                   'Below target range';
    const withinEl = document.getElementById('withinTargetText');
    withinEl.textContent = within;

    // Status box (big)
    const statusBox = document.getElementById('statusBox');
    const statusText = document.getElementById('statusText');
    const statusAmount = document.getElementById('statusAmount');
    const recommendationBox = document.getElementById('recommendationBox');

    // reset classes
    statusBox.className = 'status-big';

    if (balance > 0) {
      // Surplus
      statusBox.classList.add('surplus-box');
      statusText.textContent = 'SURPLUS';
      statusAmount.textContent = money(absBalance);
      recommendationBox.innerHTML = `<div style="color:#064e40">üí° You have a surplus. Consider reducing the student fee to <strong>${money(Math.ceil(netToBeCovered / students))}</strong> to break even, or keep current fee for contingency.</div>`;
    } else if (balance < 0) {
      // Deficit
      statusBox.classList.add('deficit-box');
      statusText.textContent = 'DEFICIT';
      statusAmount.textContent = money(absBalance);
      recommendationBox.innerHTML = `<div style="color:#5a1717">üö® There's a deficit. Increase the student fee to at least <strong>${money(Math.ceil(netToBeCovered / students))}</strong> per student to cover costs, or seek additional support.</div>`;
    } else {
      // Balanced
      statusBox.classList.add('balanced-box');
      statusText.textContent = 'BALANCED';
      statusAmount.textContent = money(0);
      recommendationBox.innerHTML = `<div style="color:#113e2f">‚öñÔ∏è Perfectly balanced. Current fee covers all costs after the church contribution.</div>`;
    }

    // Reveal results
    document.getElementById('results').classList.add('show');
  }

  // Events & initial render
  window.addEventListener('load', calculateCampCost);
  document.getElementById('students').addEventListener('input', calculateCampCost);
  document.getElementById('churchContribution').addEventListener('input', calculateCampCost);
  document.getElementById('feePerStudent').addEventListener('input', calculateCampCost);
</script>
</body>
</html>
